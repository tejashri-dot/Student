<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Revere Tech Solution(OPC) Pvt Ltd - School Management System </title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link rel="stylesheet" href="style.css">
<script src="script.js" defer></script>
<style>
body{font-family:Arial,Helvetica,sans-serif;margin:0;background:#f4f6f9}
.module{display:none;padding:20px}
.module.active{display:block}
.btn{padding:8px 14px;border:none;border-radius:4px;cursor:pointer}
.btn-primary{background:#2563eb;color:#fff}
.btn-success{background:#16a34a;color:#fff}
.btn-secondary{background:#6b7280;color:#fff}
.table-container table{width:100%;border-collapse:collapse;margin-top:10px}
th,td{border:1px solid #ddd;padding:8px;text-align:left}
th{background:#f1f5f9}
.mcq-card{background:#fff;padding:15px;margin-bottom:15px;border-radius:6px}
.option{margin:5px 0}
.score-box{background:#ecfeff;padding:15px;border-radius:6px;margin-top:15px;font-size:18px}
</style>
</head>

<body>
<!-- SIDEBAR -->
<aside class="sidebar">
    <div class="logo">
        <h2><i class="fas fa-school"></i> Revere Tech Solution(OPC) Pvt Ltd </h2>
        <small>School Management v2.0</small>
    </div>
    
    <nav class="nav-menu">
        <ul>
            <li class="active" onclick="openModule('dashboard')">
                <i class="fas fa-tachometer-alt"></i> Dashboard
            </li>
            <li onclick="openModule('students')">
                <i class="fas fa-user-graduate"></i> Students
            </li>
            <li onclick="openModule('staff')">
                <i class="fas fa-chalkboard-teacher"></i> Staff
            </li>
            <li onclick="openModule('attendance')">
                <i class="fas fa-clipboard-check"></i> Attendance
            </li>
            <li onclick="openModule('fees')">
                <i class="fas fa-file-invoice-dollar"></i> Fees
            </li>
            <li onclick="openModule('exams')">
                <i class="fas fa-edit"></i> Exams
            </li>
            <li onclick="openModule('elearning')">
                <i class="fas fa-laptop-code"></i> E-Learning
            </li>
           <li onclick="openModule('mcq')">
    <i class="fas fa-list-check"></i> MCQ Exam
</li>


            <li onclick="openModule('reports')">
                <i class="fas fa-chart-bar"></i> Reports
            </li>
            <li onclick="openModule('settings')">
                <i class="fas fa-cog"></i> Settings
            </li>
            
        </ul>
    </nav>
    
    <div class="user-profile">
        <div class="avatar">
            <i class="fas fa-user-circle"></i>
        </div>
        <div>
            <h4>Admin User</h4>
            <small>Super Administrator</small>
        </div>
    </div>
</aside>

<!-- MAIN CONTENT -->
<main class="main-content">
    <!-- HEADER -->
    <header class="main-header">
        <div class="header-left">
            <button class="menu-toggle" onclick="toggleSidebar()">
                <i class="fas fa-bars"></i>
            </button>
            <div class="breadcrumb">
                <span id="currentModule">Dashboard</span>
            </div>
        </div>
        
        <div class="header-right">
            <div class="search-box">
                <input type="text" id="globalSearch" placeholder="Search...">
                <i class="fas fa-search"></i>
            </div>
            <div class="notifications">
                <i class="fas fa-bell"></i>
                <span class="badge">3</span>
            </div>
            <div class="date-time" id="currentDateTime">
                Loading...
            </div>
        </div>
    </header>

    <!-- DASHBOARD -->
    <section class="module active" id="dashboard">
        <div class="module-header">
            <h2><i class="fas fa-tachometer-alt"></i> Dashboard Overview</h2>
            <div class="actions">
                <button class="btn btn-primary" onclick="refreshStats()">
                    <i class="fas fa-sync-alt"></i> Refresh
                </button>
                <button class="btn btn-secondary" onclick="generateReport()">
                    <i class="fas fa-download"></i> Generate Report
                </button>
            </div>
        </div>
        
        <!-- STATS CARDS -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-icon blue">
                    <i class="fas fa-user-graduate"></i>
                </div>
                <div class="stat-info">
                    <h3 id="totalStudents">0</h3>
                    <p>Total Students</p>
                </div>
                <div class="stat-trend up">
                    <i class="fas fa-arrow-up"></i> 12%
                </div>
            </div>
            
            <div class="stat-card">
                <div class="stat-icon green">
                    <i class="fas fa-chalkboard-teacher"></i>
                </div>
                <div class="stat-info">
                    <h3 id="totalStaff">0</h3>
                    <p>Teaching Staff</p>
                </div>
                <div class="stat-trend up">
                    <i class="fas fa-arrow-up"></i> 8%
                </div>
            </div>
            
            <div class="stat-card">
                <div class="stat-icon orange">
                    <i class="fas fa-clipboard-check"></i>
                </div>
                <div class="stat-info">
                    <h3 id="attendanceRate">0%</h3>
                    <p>Today's Attendance</p>
                </div>
                <div class="stat-trend down">
                    <i class="fas fa-arrow-down"></i> 5%
                </div>
            </div>
            
            <div class="stat-card">
                <div class="stat-icon gold">
                    <i class="fas fa-file-invoice-dollar"></i>
                </div>
                <div class="stat-info">
                    <h3 id="totalFees">₹0</h3>
                    <p>Fees Collected</p>
                </div>
                <div class="stat-trend up">
                    <i class="fas fa-arrow-up"></i> 15%
                </div>
            </div>
        </div>
        
        <!-- QUICK ACTIONS -->
        <div class="quick-actions">
            <h3><i class="fas fa-bolt"></i> Quick Actions</h3>
            <div class="actions-grid">
                <button class="action-btn" onclick="openModule('students')">
                    <i class="fas fa-user-plus"></i>
                    <span>Add New Student</span>
                </button>
                <button class="action-btn" onclick="openModule('attendance')">
                    <i class="fas fa-check-circle"></i>
                    <span>Mark Attendance</span>
                </button>
                <button class="action-btn" onclick="openModule('fees')">
                    <i class="fas fa-rupee-sign"></i>
                    <span>Collect Fees</span>
                </button>
                <button class="action-btn" onclick="openModule('exams')">
                    <i class="fas fa-file-alt"></i>
                    <span>Schedule Exam</span>
                </button>
                <button class="action-btn" onclick="printReport()">
                    <i class="fas fa-print"></i>
                    <span>Print Reports</span>
                </button>
                <button class="action-btn" onclick="exportAllData()">
                    <i class="fas fa-file-export"></i>
                    <span>Export Data</span>
                </button>
            </div>
        </div>
        
        <!-- RECENT ACTIVITIES -->
        <div class="recent-activities">
            <h3><i class="fas fa-history"></i> Recent Activities</h3>
            <div class="activity-list" id="activityList">
                <!-- Activities will be loaded here -->
            </div>
        </div>
    </section>

    <!-- STUDENTS MODULE -->
    <section class="module" id="students">
        <div class="module-header">
            <h2><i class="fas fa-user-graduate"></i> Student Management</h2>
            <div class="actions">
                <button class="btn btn-primary" onclick="showStudentForm()">
                    <i class="fas fa-plus"></i> Add Student
                </button>
                <button class="btn btn-secondary" onclick="exportToCSV('students')">
                    <i class="fas fa-download"></i> Export CSV
                </button>
                <button class="btn btn-secondary" onclick="printTable('studentTable')">
                    <i class="fas fa-print"></i> Print
                </button>
            </div>
        </div>
        
        <!-- SEARCH AND FILTER -->
        <div class="search-filter">
            <div class="search-box">
                <input type="text" id="searchStudent" placeholder="Search students..." 
                       onkeyup="searchTable('studentTable', this.value)">
                <i class="fas fa-search"></i>
            </div>
            <div class="filters">
                <select id="filterClass" onchange="filterStudents()">
                    <option value="">All Classes</option>
                    <option>Class 1</option>
                    <option>Class 2</option>
                    <option>Class 3</option>
                    <option>Class 4</option>
                    <option>Class 5</option>
                    <option>Class 6</option>
                    <option>Class 7</option>
                    <option>Class 8</option>
                    <option>Class 9</option>
                    <option>Class 10</option>
                </select>
            </div>
        </div>
        
        <!-- STUDENT FORM (HIDDEN BY DEFAULT) -->
        <div class="form-container" id="studentForm" style="display: none;">
            <h3><i class="fas fa-user-plus"></i> Add/Edit Student</h3>
            <div class="form-grid">
                <div class="form-group">
                    <label for="studentName"><i class="fas fa-user"></i> Full Name *</label>
                    <input type="text" id="studentName" placeholder="Enter full name" required>
                </div>
                <div class="form-group">
                    <label for="studentClass"><i class="fas fa-graduation-cap"></i> Class *</label>
                    <select id="studentClass" required>
                        <option value="">Select Class</option>
                        <option>Class 1</option>
                        <option>Class 2</option>
                        <option>Class 3</option>
                        <option>Class 4</option>
                        <option>Class 5</option>
                        <option>Class 6</option>
                        <option>Class 7</option>
                        <option>Class 8</option>
                        <option>Class 9</option>
                        <option>Class 10</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="studentRoll"><i class="fas fa-hashtag"></i> Roll Number *</label>
                    <input type="text" id="studentRoll" placeholder="Roll number" required>
                </div>
                <div class="form-group">
                    <label for="studentDOB"><i class="fas fa-birthday-cake"></i> Date of Birth</label>
                    <input type="date" id="studentDOB">
                </div>
                <div class="form-group">
                    <label for="studentContact"><i class="fas fa-phone"></i> Contact Number</label>
                    <input type="tel" id="studentContact" placeholder="Parent's contact">
                </div>
                <div class="form-group">
                    <label for="studentEmail"><i class="fas fa-envelope"></i> Email</label>
                    <input type="email" id="studentEmail" placeholder="Email address">
                </div>
                <div class="form-group">
                    <label for="studentAddress"><i class="fas fa-home"></i> Address</label>
                    <textarea id="studentAddress" rows="2" placeholder="Complete address"></textarea>
                </div>
            </div>
            <div class="form-actions">
                <button class="btn btn-success" onclick="saveStudent()">
                    <i class="fas fa-save"></i> Save Student
                </button>
                <button class="btn btn-secondary" onclick="cancelForm()">
                    <i class="fas fa-times"></i> Cancel
                </button>
            </div>
        </div>
        
        <!-- STUDENTS TABLE -->
        <div class="table-container">
            <table id="studentTable">
                <thead>
                    <tr>
                        <th>Roll No</th>
                        <th>Name</th>
                        <th>Class</th>
                        <th>Contact</th>
                        <th>Email</th>
                        <th>Status</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="studentTableBody">
                    <!-- Students will be loaded here -->
                </tbody>
            </table>
        </div>
        
        <!-- PAGINATION -->
        <div class="pagination">
            <button onclick="prevPage('students')"><i class="fas fa-chevron-left"></i> Previous</button>
            <span id="studentPageInfo">Page 1 of 1</span>
            <button onclick="nextPage('students')">Next <i class="fas fa-chevron-right"></i></button>
        </div>
    </section>

    <!-- STAFF MODULE -->
    <section class="module" id="staff">
        <div class="module-header">
            <h2><i class="fas fa-chalkboard-teacher"></i> Staff Management</h2>
            <div class="actions">
                <button class="btn btn-primary" onclick="showStaffForm()">
                    <i class="fas fa-plus"></i> Add Staff
                </button>
            </div>
        </div>
        
        <!-- STAFF FORM -->
        <div class="form-container" id="staffForm" style="display: none;">
            <h3><i class="fas fa-user-plus"></i> Add/Edit Staff Member</h3>
            <div class="form-grid">
                <div class="form-group">
                    <label>Full Name *</label>
                    <input type="text" id="staffName" placeholder="Enter full name" required>
                </div>
                <div class="form-group">
                    <label>Designation *</label>
                    <select id="staffDesignation" required>
                        <option value="">Select Designation</option>
                        <option>Principal</option>
                        <option>Vice Principal</option>
                        <option>Teacher</option>
                        <option>Librarian</option>
                        <option>Accountant</option>
                        <option>Support Staff</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Subject/Department</label>
                    <input type="text" id="staffSubject" placeholder="Subject or department">
                </div>
                <div class="form-group">
                    <label>Contact Number</label>
                    <input type="tel" id="staffContact" placeholder="Contact number">
                </div>
                <div class="form-group">
                    <label>Email Address</label>
                    <input type="email" id="staffEmail" placeholder="Email address">
                </div>
                <div class="form-group">
                    <label>Joining Date</label>
                    <input type="date" id="staffJoinDate">
                </div>
            </div>
            <div class="form-actions">
                <button class="btn btn-success" onclick="saveStaff()">
                    <i class="fas fa-save"></i> Save Staff
                </button>
                <button class="btn btn-secondary" onclick="cancelForm()">
                    <i class="fas fa-times"></i> Cancel
                </button>
            </div>
        </div>
        
        <!-- STAFF TABLE -->
        <div class="table-container">
            <table id="staffTable">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Name</th>
                        <th>Designation</th>
                        <th>Subject</th>
                        <th>Contact</th>
                        <th>Status</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="staffTableBody">
                    <!-- Staff will be loaded here -->
                </tbody>
            </table>
        </div>
    </section>

    <!-- ATTENDANCE MODULE -->
    <section class="module" id="attendance">
        <div class="module-header">
            <h2><i class="fas fa-clipboard-check"></i> Attendance Management</h2>
            <div class="actions">
                <button class="btn btn-primary" onclick="markAttendance()">
                    <i class="fas fa-check-circle"></i> Mark Today's Attendance
                </button>
            </div>
        </div>
        
        <div class="attendance-controls">
            <div class="control-group">
                <label>Select Date:</label>
                <input type="date" id="attendanceDate" value="">
            </div>
            <div class="control-group">
                <label>Select Class:</label>
                <select id="attendanceClass" onchange="loadClassAttendance()">
                    <option value="">All Classes</option>
                    <option>Class 1</option>
                    <option>Class 2</option>
                    <option>Class 3</option>
                    <option>Class 4</option>
                    <option>Class 5</option>
                    <option>Class 6</option>
                    <option>Class 7</option>
                    <option>Class 8</option>
                    <option>Class 9</option>
                    <option>Class 10</option>
                </select>
            </div>
        </div>
        
        <div class="attendance-table-container">
            <table id="attendanceTable">
                <thead>
                    <tr>
                        <th>Roll No</th>
                        <th>Name</th>
                        <th>Class</th>
                        <th>Status</th>
                        <th>Date</th>
                        <th>Remarks</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="attendanceTableBody">
                    <!-- Attendance will be loaded here -->
                </tbody>
            </table>
        </div>
        
        <div class="attendance-summary">
            <div class="summary-card present">
                <h3 id="presentCount">0</h3>
                <p>Present</p>
            </div>
            <div class="summary-card absent">
                <h3 id="absentCount">0</h3>
                <p>Absent</p>
            </div>
            <div class="summary-card late">
                <h3 id="lateCount">0</h3>
                <p>Late</p>
            </div>
            <div class="summary-card total">
                <h3 id="totalAttendance">0</h3>
                <p>Total Students</p>
            </div>
        </div>
    </section>
   <section class="module" id="mcq">
<h2><i class="fas fa-user-graduate"></i> MCQ Examination</h2>

<div class="form-grid">
    <div class="form-group">
        <label>Student Name</label>
        <input type="text" id="studentNameMCQ" placeholder="Enter student name">
    </div>

    <div class="form-group">
        <label>Select Class</label>
        <select id="studentClassMCQ" onchange="loadClassMCQ()">
            <option value="">Select Class</option>
            <option value="9">Class 9</option>
            <option value="10">Class 10</option>
        </select>
    </div>
</div>

<div id="mcqPaper">
    <button class="btn btn-success" onclick="showAddMCQForm()">
    <i class="fas fa-plus"></i> Add Question
</button>

<div id="addMCQForm" style="display:none; margin-top:15px;" class="mcq-card">
    <h3>Add New MCQ Question</h3>

    <label>Select Class *</label>
    <select id="mcqClass" style="width:100%;margin-bottom:8px;">
        <option value="">Select Class</option>
        <option value="9">Class 9</option>
        <option value="10">Class 10</option>
    </select>

    <input type="text" id="newQuestion" placeholder="Enter question" style="width:100%;margin-bottom:8px;">

    <input type="text" id="optA" placeholder="Option A" style="width:100%;margin-bottom:5px;">
    <input type="text" id="optB" placeholder="Option B" style="width:100%;margin-bottom:5px;">
    <input type="text" id="optC" placeholder="Option C" style="width:100%;margin-bottom:5px;">
    <input type="text" id="optD" placeholder="Option D" style="width:100%;margin-bottom:8px;">

    <label>Correct Answer *</label>
    <select id="correctOption" style="width:100%;margin-bottom:10px;">
        <option value="">Select Correct Option</option>
        <option value="A">A</option>
        <option value="B">B</option>
        <option value="C">C</option>
        <option value="D">D</option>
    </select>

    <button class="btn btn-primary" onclick="addMCQ()">Save Question</button>
    <button class="btn btn-secondary" onclick="cancelMCQ()">Cancel</button>
</div>

</div>

<button class="btn btn-primary" onclick="submitMCQ()">Submit MCQ</button>

<div id="resultBox"></div>
</section>



    <!-- FEES MODULE -->
    <section class="module" id="fees">
        <div class="module-header">
            <h2><i class="fas fa-file-invoice-dollar"></i> Fee Management</h2>
            <div class="actions">
                <button class="btn btn-primary" onclick="showFeeForm()">
                    <i class="fas fa-plus"></i> Collect Fee
                </button>
            </div>
        </div>
        
        <!-- FEE FORM -->
        <div class="form-container" id="feeForm" style="display: none;">
            <h3><i class="fas fa-money-bill-wave"></i> Collect Fee</h3>
            <div class="form-grid">
                <div class="form-group">
                    <label>Student *</label>
                    <select id="feeStudent" required>
                        <option value="">Select Student</option>
                        <!-- Students will be populated here -->
                         <option>Rahul Sharma</option>
    <option>Anjali Verma</option>
    <option>Mohit Singh</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Fee Type *</label>
                    <select id="feeType" required>
                        <option value="">Select Fee Type</option>
                        <option>Tuition Fee</option>
                        <option>Exam Fee</option>
                        <option>Library Fee</option>
                        <option>Sports Fee</option>
                        <option>Transport Fee</option>
                        <option>Other</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Amount (₹) *</label>
                    <input type="number" id="feeAmount" placeholder="Enter amount" required>
                </div>
                <div class="form-group">
                    <label>Payment Date</label>
                    <input type="date" id="feeDate" value="">
                </div>
                <div class="form-group">
                    <label>Payment Method</label>
                    <select id="feeMethod">
                        <option>Cash</option>
                        <option>Cheque</option>
                        <option>Online Transfer</option>
                        <option>Card</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Remarks</label>
                    <input type="text" id="feeRemarks" placeholder="Any remarks">
                </div>
            </div>
            <div class="form-group">
    <label>Total Fee (₹) *</label>
    <input type="number" id="feeTotal" placeholder="Total fee for student" required>
</div>

            <div class="form-actions">
                <button class="btn btn-success" onclick="saveFee()">
                    <i class="fas fa-save"></i> Save Fee
                </button>
                <button class="btn btn-secondary" onclick="cancelForm()">
                    <i class="fas fa-times"></i> Cancel
                </button>
            </div>
        </div>
        
        <!-- FEES TABLE -->
        <div class="table-container">
            <table id="feeTable">
                <thead>
                    <tr>
                        <th>Receipt No</th>
                        <th>Student Name</th>
                        <th>Fee Type</th>
                        <th>Amount</th>
                        <th>Date</th>
                        <th>Method</th>
                        <th>Status</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="feeTableBody">
                    <!-- Fees will be loaded here -->
                </tbody>
            </table>
        </div>
        
        <!-- FEE SUMMARY -->
        <div class="fee-summary">
            <div class="summary-item">
                <span>Total Collected:</span>
                <strong id="totalCollected">₹0</strong>
            </div>
            <div class="summary-item">
                <span>Pending Amount:</span>
                <strong id="totalPending" class="text-danger">₹0</strong>
            </div>
            <div class="summary-item">
                <span>This Month:</span>
                <strong id="monthlyCollection">₹0</strong>
            </div>
        </div>
    </section>

    <!-- EXAMS MODULE -->
    <section class="module" id="exams">
        <div class="module-header">
            <h2><i class="fas fa-edit"></i> Exam Management</h2>
            <div class="actions">
                <button class="btn btn-primary" onclick="showExamForm()">
                    <i class="fas fa-plus"></i> Schedule Exam
                </button>
            </div>
        </div>
        
        <!-- EXAMS TABLE -->
        <div class="table-container">
            <table id="examTable">
                <thead>
                    <tr>
                        <th>Exam ID</th>
                        <th>Exam Name</th>
                        <th>Subject</th>
                        <th>Class</th>
                        <th>Date</th>
                        <th>Time</th>
                        <th>Duration</th>
                        <th>Total Marks</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="examTableBody">
                    <!-- Exams will be loaded here -->
                </tbody>
            </table>
        </div>
    </section>

    <!-- E-LEARNING MODULE -->
    <section class="module" id="elearning">
        <div class="module-header">
            <h2><i class="fas fa-laptop-code"></i> E-Learning Portal</h2>
            <div class="actions">
                <button class="btn btn-primary" onclick="showContentForm()">
                    <i class="fas fa-plus"></i> Add Content
                </button>
            </div>
        </div>
        
        <!-- CONTENT GRID -->
        <div class="content-grid" id="contentGrid">
            <!-- Content cards will be loaded here -->
        </div>
    </section>

    <!-- REPORTS MODULE -->
    <section class="module" id="reports">
        <div class="module-header">
            <h2><i class="fas fa-chart-bar"></i> Reports & Analytics</h2>
        </div>
        
        <div class="reports-container">
            <div class="report-card" onclick="generateStudentReport()">
                <i class="fas fa-user-graduate"></i>
                <h3>Student Report</h3>
                <p>Generate detailed student reports</p>
            </div>
            
            <div class="report-card" onclick="generateAttendanceReport()">
                <i class="fas fa-clipboard-check"></i>
                <h3>Attendance Report</h3>
                <p>Monthly attendance analysis</p>
            </div>
            
            <div class="report-card" onclick="generateFeeReport()">
                <i class="fas fa-file-invoice-dollar"></i>
                <h3>Fee Report</h3>
                <p>Fee collection statistics</p>
            </div>
            
            <div class="report-card" onclick="generateExamReport()">
                <i class="fas fa-edit"></i>
                <h3>Exam Report</h3>
                <p>Exam performance analysis</p>
            </div>
        </div>
    </section>

    <!-- SETTINGS MODULE -->
    <section class="module" id="settings">
        <div class="module-header">
            <h2><i class="fas fa-cog"></i> System Settings</h2>
        </div>
        
        <div class="settings-container">
            <div class="setting-section">
                <h3><i class="fas fa-school"></i> School Information</h3>
                <div class="form-grid">
                    <div class="form-group">
                        <label>School Name</label>
                        <input type="text" id="schoolName" placeholder="Enter school name">
                    </div>
                    <div class="form-group">
                        <label>Address</label>
                        <textarea id="schoolAddress" rows="2"></textarea>
                    </div>
                    <div class="form-group">
                        <label>Contact Email</label>
                        <input type="email" id="schoolEmail">
                    </div>
                    <div class="form-group">
                        <label>Phone Number</label>
                        <input type="tel" id="schoolPhone">
                    </div>
                </div>
            </div>
            
            <div class="setting-section">
                <h3><i class="fas fa-database"></i> Data Management</h3>
                <div class="data-actions">
                    <button class="btn btn-secondary" onclick="backupData()">
                        <i class="fas fa-save"></i> Backup Data
                    </button>
                    <button class="btn btn-secondary" onclick="restoreData()">
                        <i class="fas fa-undo"></i> Restore Data
                    </button>
                    <button class="btn btn-danger" onclick="clearData()">
                        <i class="fas fa-trash"></i> Clear All Data
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- MODAL FOR CONFIRMATION -->
    <div class="modal" id="confirmationModal">
        <div class="modal-content">
            <h3><i class="fas fa-exclamation-triangle"></i> Confirm Action</h3>
            <p id="modalMessage">Are you sure you want to perform this action?</p>
            <div class="modal-actions">
                <button class="btn btn-danger" onclick="confirmAction(true)">
                    Confirm
                </button>
                <button class="btn btn-secondary" onclick="confirmAction(false)">
                    Cancel
                </button>
            </div>
        </div>
    </div>

    <!-- NOTIFICATION TOAST -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- FOOTER -->
    <footer class="main-footer">
        <div class="footer-content">
            <div class="footer-left">
                <h4>Moren Tech School Management System</h4>
                <p>Version 2.0 | © 2026 All rights reserved</p>
            </div>
            <div class="footer-right">
                <div class="system-info">
                    <span id="dataSize">Data: 0 KB</span>
                    <span id="lastSync">Last sync: Just now</span>
                </div>
            </div>
        </div>
    </footer>
</main>

<script>
 let fees = JSON.parse(localStorage.getItem("fees")) || [];
let editFeeIndex = null;

/* SAVE / UPDATE FEE */
function saveFee() {
    const student = document.getElementById("feeStudent").value;
    const type = document.getElementById("feeType").value;
    const paid = Number(document.getElementById("feeAmount").value);
    const total = Number(document.getElementById("feeTotal").value);
    const date = document.getElementById("feeDate").value || new Date().toISOString().slice(0,10);
    const method = document.getElementById("feeMethod").value;
    const remarks = document.getElementById("feeRemarks").value;

    if (!student || !type || !paid || !total) {
        alert("Please fill all required fields");
        return;
    }

    if (paid > total) {
        alert("Paid amount cannot exceed total fee");
        return;
    }

    let feeData;

    if (editFeeIndex !== null) {
        // UPDATE (keep same receipt)
        feeData = fees[editFeeIndex];
        feeData.student = student;
        feeData.type = type;
        feeData.paid = paid;
        feeData.total = total;
        feeData.date = date;
        feeData.method = method;
        feeData.remarks = remarks;
    } else {
        // NEW ENTRY
        feeData = {
            receipt: "R" + Date.now(),
            student,
            type,
            paid,
            total,
            date,
            method,
            remarks
        };
        fees.push(feeData);
    }

    localStorage.setItem("fees", JSON.stringify(fees));
    editFeeIndex = null;
    document.getElementById("feeForm").style.display = "none";
    clearFeeForm();
    loadFees();
}

/* LOAD FEES */
function loadFees() {
    const tbody = document.getElementById("feeTableBody");
    tbody.innerHTML = "";

    let totalCollected = 0;
    let totalPending = 0;
    let monthly = 0;
    const month = new Date().getMonth();

    fees.forEach((f, i) => {
        const pending = f.total - f.paid;
        totalCollected += f.paid;
        totalPending += pending;

        if (new Date(f.date).getMonth() === month) {
            monthly += f.paid;
        }

        tbody.innerHTML += `
        <tr>
            <td>${f.receipt}</td>
            <td>${f.student}</td>
            <td>${f.type}</td>
            <td>₹${f.paid}</td>
            <td>${f.date}</td>
            <td>${f.method}</td>
            <td style="color:${pending > 0 ? 'red' : 'green'}">
                ${pending > 0 ? 'Pending ₹' + pending : 'Paid'}
            </td>
            <td>
                <button class="btn btn-primary btn-sm" onclick="editFee(${i})">
                    <i class="fas fa-edit"></i>
                </button>
                <button class="btn btn-danger btn-sm" onclick="deleteFee(${i})">
                    <i class="fas fa-trash"></i>
                </button>
            </td>
        </tr>`;
    });

    document.getElementById("totalCollected").innerText = "₹" + totalCollected;
    document.getElementById("totalPending").innerText = "₹" + totalPending;
    document.getElementById("monthlyCollection").innerText = "₹" + monthly;
}

/* EDIT */
function editFee(index) {
    const f = fees[index];
    editFeeIndex = index;

    document.getElementById("feeStudent").value = f.student;
    document.getElementById("feeType").value = f.type;
    document.getElementById("feeAmount").value = f.paid;
    document.getElementById("feeTotal").value = f.total;
    document.getElementById("feeDate").value = f.date;
    document.getElementById("feeMethod").value = f.method;
    document.getElementById("feeRemarks").value = f.remarks;

    document.getElementById("feeForm").style.display = "block";
}

/* DELETE */
function deleteFee(index) {
    if (!confirm("Delete this fee record?")) return;
    fees.splice(index, 1);
    localStorage.setItem("fees", JSON.stringify(fees));
    loadFees();
}

/* CLEAR */
function clearFeeForm() {
    ["feeStudent","feeType","feeAmount","feeTotal","feeDate","feeRemarks"]
        .forEach(id => document.getElementById(id).value = "");
    document.getElementById("feeMethod").value = "Cash";
}

/* SHOW FORM */
function showFeeForm() {
    editFeeIndex = null;
    clearFeeForm();
    document.getElementById("feeForm").style.display = "block";
}

/* INIT */
window.addEventListener("load", loadFees);

// Clear form
function clearFeeForm() {
    document.getElementById("feeStudent").value = "";
    document.getElementById("feeType").value = "";
    document.getElementById("feeAmount").value = "";
    document.getElementById("feeDate").value = "";
    document.getElementById("feeMethod").value = "Cash";
    document.getElementById("feeRemarks").value = "";
}

// Show Form
function showFeeForm() {
    editFeeIndex = null;
    clearFeeForm();
    document.getElementById("feeForm").style.display = "block";
}

// Load fees on startup
window.addEventListener("load", loadFees);


    const mcqBank = {
  9: [
    {
      q: "What is the chemical formula of water?",
      options: {A:"H2O", B:"CO2", C:"O2", D:"NaCl"},
      correct: "A"
    },
    {
      q: "Which gas is used in respiration?",
      options: {A:"Nitrogen", B:"Oxygen", C:"Carbon", D:"Hydrogen"},
      correct: "B"
    }
  ],
  10: [
    {
      q: "What is Newton's Third Law?",
      options: {
        A:"F=ma",
        B:"Energy conservation",
        C:"Action-Reaction",
        D:"Gravity law"
      },
      correct: "C"
    },
    {
      q: "Unit of electric current?",
      options: {A:"Volt", B:"Ohm", C:"Ampere", D:"Watt"},
      correct: "C"
    }
  ]
};
function showAddMCQForm() {
    document.getElementById("addMCQForm").style.display = "block";
}

function cancelMCQ() {
    document.getElementById("addMCQForm").style.display = "none";
}

function addMCQ() {
    const cls = document.getElementById("mcqClass").value;
    const q = document.getElementById("newQuestion").value;
    const A = document.getElementById("optA").value;
    const B = document.getElementById("optB").value;
    const C = document.getElementById("optC").value;
    const D = document.getElementById("optD").value;
    const correct = document.getElementById("correctOption").value;

    if (!cls || !q || !A || !B || !C || !D || !correct) {
        alert("Please fill all fields including class");
        return;
    }

    // Create class array if not exists
    if (!mcqBank[cls]) {
        mcqBank[cls] = [];
    }

    // Save question for selected class
    mcqBank[cls].push({
        q: q,
        options: { A, B, C, D },
        correct: correct
    });

    alert(`Question saved for Class ${cls} ✅`);

    // Clear form
    document.getElementById("mcqClass").value = "";
    document.getElementById("newQuestion").value = "";
    document.getElementById("optA").value = "";
    document.getElementById("optB").value = "";
    document.getElementById("optC").value = "";
    document.getElementById("optD").value = "";
    document.getElementById("correctOption").value = "";

    document.getElementById("addMCQForm").style.display = "none";

    // Reload MCQs if same class is selected by student
    loadClassMCQ();
}

let currentMCQ = [];
function loadClassMCQ() {
    const cls = document.getElementById("studentClassMCQ").value;
    const mcqPaper = document.getElementById("mcqPaper");

    mcqPaper.innerHTML = "";
    currentMCQ = mcqBank[cls] || [];

    if (currentMCQ.length === 0) {
        mcqPaper.innerHTML = "<p>No MCQ available for this class.</p>";
        return;
    }

    currentMCQ.forEach((q, i) => {
        mcqPaper.innerHTML += `
            <div class="mcq-card">
                <strong>Q${i + 1}. ${q.q}</strong>
                ${Object.entries(q.options).map(([k, v]) => `
                    <div class="option">
                        <label>
                            <input type="radio" name="q${i}" value="${k}">
                            ${k}. ${v}
                        </label>
                    </div>
                `).join("")}
            </div>
        `;
    });
}


// Initialize system
window.onload = function() {
    initializeSystem();
    updateDateTime();
    setInterval(updateDateTime, 1000);
    loadAllData();
    updateDashboardStats();
    updateDataSize();
};
function submitMCQ(){
  const studentName = document.getElementById("studentNameMCQ").value;
  const studentClass = document.getElementById("studentClassMCQ").value;

  if(!studentName || !studentClass){
    alert("Please enter student name and class");
    return;
  }

  let correct = 0;
  let attempted = 0;

  currentMCQ.forEach((q,i)=>{
    const ans = document.querySelector(`input[name=q${i}]:checked`);
    if(ans){
      attempted++;
      if(ans.value === q.correct) correct++;
    }
  });

  document.getElementById("resultBox").innerHTML = `
    <div class="score-box">
      <strong>Student Name:</strong> ${studentName}<br>
      <strong>Class:</strong> ${studentClass}<br>
      <strong>Total Questions:</strong> ${currentMCQ.length}<br>
      <strong>Attempted:</strong> ${attempted}<br>
      <strong>Correct Answers:</strong> ${correct}
    </div>
  `;
}
function updateDataSize() {
    const el = document.getElementById("dataSize");
    if (el) {
        el.innerText = "Data: 120 KB";
    }
}

function openModule(moduleId) {
    document.querySelectorAll(".module").forEach(section => {
        section.classList.remove("active");
    });

    const target = document.getElementById(moduleId);
    if (target) {
        target.classList.add("active");
        document.getElementById("currentModule").innerText =
            target.querySelector("h2")?.innerText || moduleId;
    } else {
        alert("Module not found: " + moduleId);
    }
}



</script>

</body>
</html>